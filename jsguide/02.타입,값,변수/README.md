# 타입, 값, 변수
## 숫자
- 자바스크립트는 정수 값과 실수 값을 구분하지 않는다.
  - 자바스크립트에서는 모든 숫자를 실수로 표현한다.
  - 숫자를 IEEE 754 표준에서 정의한 64비트 실수 형태로 표현한다.

### 정수 리터럴
- 자바스크립트에서 10진수 정수는 숫자를 일렬로 나열한 것이다.
```js
0
3
100000
```
- 16진수 리터럴은 0x 나 0X 뒤에 16진수 숫자들이 뒤따르는 형태다.
```js
0xff // 15 * 16 + 15 = 255
0xCAFE911
```
- 일부 자바스크립트 구현체에서는 정수 리터럴을 8진수로도 표현할 수 있다. (ECMAScript 표준에서 8진수 표현을 지원하지는 않는다.)
  - 8진수 리터럴은 0 뒤에 0 ~ 7 사이의 숫자 시퀸스가 뛰따른다.
  - ES5 의 strict mode 에서는 8진수 리터럴을 명시적으로 금지한다.
```js
0377 // 3 * 64 + 7 * 8 + 7 = 255
```

### 부동소수점 리터럴
- 부동소수점 리터럴은 소수점을 가질 수 있으며, 정수 부분과 소수점 그리고 소수점 이하 부분으로 표현한다.
- 부동소수점 리터럴은 지수 표기법으로도 표현할 수 있다. 실수에 이어 문자 e 나 E 가 오고, 그 뒤에 선택적으로 + / - 가 오고, 마지막으로 정수 지수 값이 따라온다.
```js
3.14
2345.789
.333333
6.02e23 // 6.02 * 10^23
1.4738223E-32 // 1.4738223 * 10^-32
```

### 산술 연산
- 사칙연산 ( + - * /) 과 나눗셈 뒤 나머지를 구하는 % 연산자가 있다.
  - ES7 에서는 지수 연산자도 구현되어 있다. (2 &#42;&#42; 3 // 8)
- Math 객체를 통해 더 복잡한 수치 연산을 지원한다.
  - [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math) 에서 더 자세한 내용을 볼 수 있다.
```js
Math.pow(2, 53) // 2^53
Math.round(.6) // 1
Math.ceil(.6) // 1
Math.floor(.6) // 0
Math.abs(-5) // 5
Math.max(x, y, z) // 가장 큰 값
Math.min(x, y, z) // 가장 작은 값
Math.random() // 0 과 1 사이의 난수
Math.PI // 원주율
Math.E // 자연 로그 상수 e
Math.sqrt(3) // 3 의 제곱근
Math.sin(Math.PI / 2) // 1 이외 cos, tan 등의 삼각함수
Math.log(10) // 자연 로그 10
Math.log(512)/Math.LN2 // 9 밑이 2인 로그 512
Math.exp(3) // Math.E 의 3 거듭제곱
```
- 자바스크립트 산술 연산은 오버플로와 언더플로, 0 으로 나누는 에러를 발생시키지 않는다.
  - 산술 연산 결과가 표현 범위 최대보다 크면 Infinity, 최소보다 작으면 -Infinity 를 출력한다.
  - 언더플로는 산술 연산 결과가 표현할 수 있는 가장 작은 값보다 더 0 에 가까우면, 0 혹은 -0 을 출력한다.
    - -0 은 자바스크립트 특수 값인데, 음의 0으로 0 과 같다.
```js
-0.1e-400; // -0
0.1e400; // 0
-0.1e-400 === 0.1e400 // true
```
  - 0 으로 나누는 연산은 에러가 아니며, Infinity 혹은 -Infinity 를 출력한다.
    - 다만, 0 / 0 은 NaN (Not a Number) 가 출력된다.
    - NaN 은 무한대를 무한대로 나누는 경우, 음수에 루트를 씌우는 경우, 숫자가 아닌 피연산자로 산술 연산을 하는 경우에도 발생한다.
    - ES5 에서 NaN 과 Infinity 는 읽기 전용 값으로 정의하며, Number 객체에는 Infinity 와 NaN 이 따로 상수로 정의되어 있다.

### 이진 부동소수점과 반올림 오류
- 자바스크립트에서는 한정된 숫자만 부동소수점 형태로 표현할 수 있다.
- 자바스크립트에서는 실수 연산을 할 때 근사값으로 표현한다.
  - 자바스크립트는 높은 정밀도를 가지고 있어서 0.1 에 근접한 근사치를 낼 수 있지만, 정확하게 표현할 수는 없다.
```js
.3 - .2 // 0.09999999999999998
.2 - .1 // 0.1
```
- 이 것은 부동소수점 숫자를 사용하기 때문에 벌어지는 현상이며, 계산된 값은 대부분 적절하지만, 동등 비교할 경우 문제가 발생한다.
  - 자바스크립트의 다음 버전은 이런 반올림 문제를 피하는 십진수 타입을 지원할 예정이라고 한다.

### 날짜와 시간
- Date() 생성자를 통해 날짜와 시간을 표현할 수 있다.
- Date 객체는 간단한 날짜 계산을 하는 메소드를 가진다.
```js
var then = new Date(2010, 0, 1); // 2010.01.01
var later = new Date(2010, 0, 1, 17, 10, 30); // 2010.01.01 17:10:30

var now = new Date(); // Fri Jul 22 2016 01:58:28 GMT+0900 (KST)
var elapsed = now - then; // millisecond 단위로 날짜 계산
var timestamp = +new Date(); // 1469120357691

later.getFullYear() // 2010
later.getMonth() // 1 : 월은 0 부터 시작한다.
later.getDate() // 1 : 일은 1 부터 시작한다.
later.getDay() // 5 : 0 은 일요일, 5는 금요일
later.getHours() // 17 : 오후 5 시
later.getUTCHours() // 8 : 서울은 UTC+09 이므로, 9 시간을 뺀다.
later.toString() // Fri Jan 01 2010 17:10:30 GMT+0900 (KST)
later.toUTCString() // Fri, 01 Jan 2010 08:10:30 GMT
later.toLocaleDateString() // 2010. 1. 1. 오후 5:10:30
later.toLocaleTimeString() // 오후 5:10:30
later.toISOString() // 2010-01-01T08:10:30.000Z
```

## 텍스트
- 문자열은 16 비트 값들이 연속적으로 나열된 변경 불가능한 값으로, 각 문자는 유니코드 문자로 표현된다.

### 문자열 리터럴
- 문자열 그대로를 포함하려면 단순히 문자열을 작은 따홈표 혹은 큰 따옴표로 둘러싸면 된다.
  - Airbnb 의 [Java Script Style Guide](https://github.com/airbnb/javascript#strings) 에 따르면, 작은 따옴표를 쓰길 권장한다.
- ES3 에서는 문자열 리터럴은 한 줄로 작성해야 하지만, ES5 에서는 줄 끝에 역슬래시를 쓰면, 한 줄을 여러 줄로 작성할 수 있다.
  - 역슬래시와 그 뒤에 오는 종료자(line terminator) 는 문자열 리터럴의 일부가 아니다.
  - 문자열 리터럴에 줄바꿈 문자를 포함시켜야 한다면, \n 을 사용한다.
```js
'two\nlines'
/*
 * two
 * lines
 */

'one\
long\
line'
/*
 * onelongline
 */
```
- ''로 감싸진 문자열에서 ' 를 이스케이프 하기 위해서는 \ 를 앞에 붙여준다.
```js
'Hi! I\'m Jaewon.'
```

### 문자열 리터럴 내의 이스케이프 문자열
- \ 는 자바스크립트 문자열에서 특별한 기능을 수행한다.
  - \n 은 줄바꿈 문자를 나타내는 이스케이프 시퀸스다.
- 다음은 자바스크립트 이스케이프 시퀸스들이다.
|시퀸스|표현하는 문자|
|:-----|------------:|
|\0    |널 문자(\u0000)|
|\b    |역스페이스(\u0008)|
|\t    |수평 탭(\u0009)|
|\n    |줄바꿈 문자(\u000A)|
|\v    |수직 탭(\u000B)|
|\f    |폼 피드(\u000C)|
|\r    |캐리지 리턴(\u000D)|
|\"    |큰따옴표(\u0022)|
|\'    |작은따옴표(\u0027)|
|\\\\  |역슬래시(\u005C)|
|\x    |두 개의 16 진수 숫자 xx 에 의해 지정되는 Latin-1 문자|
|\u    |네 개의 16 진수 숫자 xxxx 에 의해 지정되는 유니코드 문자|

### 문자열 다루기
- + 연산자를 통해 여러 문자열을 이어 붙일 수 있다.
```js
var msg = 'Hello, ' + 'World!'; // Hello, World!
```
- 문자열의 길이는 length 프로퍼티를 사용하면 된다.
```js
var s = 'String Length';
s.length; // 13
```
length 이외에도 문자열을 다루는 다양한 메소드가 있다.
```js
var s = 'hello, world';
s.charAt(0); // h : 첫 번째 문자
s.charAt(s.length - 1); // d : 마지막 문자

s.substring(1, 4); // ell : 1 ~ 4 까지 (1 ~ 2 : e / 2 ~ 3 : l / 3 ~ 4 : l) String 객체의 부분 집합을 반환한다.
s.substring(4, 1); // 위와 같다.
// 모든 인자의 최소값은 0 이고, 최대값은 s.length - 1 이다.

s.slice(1, 4); // ell : 1 ~ 4 이외의 문자열을 제거하고, 새 문자열을 반환한다.
s.slice(4, 1); // '' : 4 위치에서부터 1 번째 위치까지 잘라낸다.
s.slice(1, -1); // s.slice(1, s.length - 1);
// 인자에서 음수는 s.length 에서 해당 수의 절대값을 뺀 값이다.

s.indexOf('l'); // 2 : 문자 l 이 위치한 첫 번째 위치
s.lastIndexOf('l'); // 10 : 문자 l 이 위치한 마지막 위치
s.indexOf('l', 3); // 3 : 세 번째 문자 이후(포함), 문자 l 이 등장하는 첫 위치

s.split(', '); // ['hello', 'world'] 문자열 hello, world 를 문자열 ', ' 로 구분하고, 이를 배열로 반환한다.

s.replace('h', 'H'); // Hello, world : h 를 H 로 치환한다.
// 첫 번째 인자에 RegExp 가 올 수 있다.

s.toUpperCase(); // HELLO, WORLD : 대문자로 치환한다.
```

### 패턴 매칭
- 자바스크립트는 문자 패턴을 나타내는 객체를 생성하기 위해 RegExp() 생성자를 정의한다.
- 이 패턴은 정규 표현식(Regular Expression) 이라고 부르며, Perl 의 구문을 따른다.
- RegExp 는 자바스크립트의 원시 타입이 아니다.
  - Date 객체처럼 RegExp 는 유용한 API 를 가지고 있는 객체이다.
  - RegExp 는 자바스크립트의 기본 데이터 타입은 아니지만, 정규식에 대한 리터럴 문법을 가지고 있다.
    - 한 쌍의 슬래시 사이에 있는 문자열은 정규 표현식 리터럴을 구성한다.
```js
/^HTML/; // HTML 로 시작하는 문자열
/[1-9][0-9]*/; // 0 이 아닌 숫자로 시작하는 숫자
/\bjavascript\b/i; // 대소문자 구별없이 javascript 와 일치하는 문자열
```
- RegExp 객체의 메소드는 다음과 같다.
```js
var text = 'testing: 1, 2, 3';
var pattern = /\d+/g; // 하나 이상의 모든 숫자와 일치
// pattern = new RegExp('\d', 'g'); 와 같이 선언할 수도 있다.

pattern.test(text); // true : 일치하는 문자열이 존재
text.search(pattern); // 9 : 첫 번째로 매치하는 문자열의 위치
text.match(pattern); // ['1', '2', '3'] : 일치된 항목의 배열
text.replace(pattern, '#'); // testing: #, #, #
text.split(/\D+/); // ['', '1', '2', '3'] : 숫자가 아닌 문자열을 기준으로 분할
```

## 불린 값
- 불린 값은 참/거짓을 표현한다. 불린 값이 될 수 있는 표현식은 예약어인 true, false 밖에 없다.
- a == 4 와 같이 비교의 결과로 생성할 수도 있다.
- 일반적으로 불린 값은 자바스크립트 제어 구조 내에서 사용된다.
```js
if (a === 4) {
  b = b + 1;
} else {
  a = a + 1;
}
```
- 다음 값들은 모두 false 와 같다.
  - 이 외의 값들(객체를 포함하는 다른 모든 값)은 모두 true 와 같다.
```js
undefined
null
0
-0
NaN
'' // 빈 문자열
```
- 문자열이나, 숫자 등의 값을 Boolean 타입으로 형변환 하기 위해서 다음과 같이 코드를 작성할 수 있다.
```js
var a = '123456';
var b = undefined;
var c = document;

!!a // true
!!b // false
!!c // true
```
- 자바스크립트는 거짓으로 판정되는 값은 false 로, 참으로 판정되는 값은 true 로 동작할 것이라고 기대한다.
  - 예를 들어, o 가 객체 또는 null 값을 가지고 있다고 가정한다. 다음과 같은 구문을 사용하면, o 가 null 인지 아닌지 여부를 명확히 테스트할 수 있다.
  - 비교를 생략하고 o 만을 조건문에 조건으로 주어도 되며, 단순히, o 가 true 인지 false 인지를 검사할 때에는 이런식으로 코딩하길 권장한다.
    - 하지만, o 가 무조건 null 인지를 검사할 때는 명확하게 o !== null 라고 조건을 주어야 한다.
```js
if (o !== null) ...
if (o) ...
```
- 불린 값에 사용되는 세 가지 중요한 연산자가 있다.
  - && 연산자는 불린 AND 연산을 수행하며, 두 피연산자가 모두 참일 때 참으로 평가한다.
  - || 연산자는 불린 OR 연산자로, 두 피연산자 중 하나라도 참이면 참이고, 두 개 모두 거짓이어야 거짓을 반환한다.
  - ! 연산자는 불린 NOT 연산을 수행하며, 피연산자가 거짓이면 참, 참이면 거짓을 반환한다.

## null 과 undefined
- null 은 아무 값도 갖지 않음을 가리킬 때 사용되며, typeof 로 타입을 체크하면 object 를 반환한다.
- undefined 는 null 보다 심한 부재 상태를 나타내며, 초기화되어 있지 않는 변수나, 존재하지 않는 객체 프로퍼티 혹은, 배열의 원소 값에 접근할 때 얻는 값이다.
- undefined 는 또, 반환 값이 없는 함수의 반환값이고, 실 인자가 전달되지 않은 형식인자의 값이다.
- null 과 undefined 는 둘 다 값이 없음을 가리킨다.
- null 과 undefined 를 비교하면 다음과 같다.
```js
null == undefined // true
null === undefined // false

/***** because... *****/
typeof null // object
typeof undefined // undefined
```
- 주로, 시스템 수준에서 예기치 않은 상황에 발생한, 오류성 값 부재를 표현할 때 undefined 를 사용한다.
- 일반적으로, 또는 예상 가능한 값 부재 상황을 표현할 때 null 을 사용한다.
  - 변수나 프로퍼티에 할당할 필요가 있거나 함수에 인자로 전달할 필욕 있다면, undefined 보다는 null 을 사용하는 것이 좋다.

## 전역 객체
- 전역 객체는 매우 중요한 용도로 사용되는 일반적인 자바스크립트 객체이다.
  - 전역 객체의 프로퍼티는 자바스크립트 프로그램 전역에서 사용할 수 있게 정의된 심볼이며, 자바스크립트 인터프리터가 시작할 때, 새로운 전역 객체를 만들고 그 프로퍼티들을 초기화한다.
  - undefined, Infinity, NaN 같은 전역 프로퍼티
    - 전역 객체가 생성될 때 초기화되는 프로퍼티들은 예약어가 아니지만, 예약어처럼 취급된다.
  - isNaN(), parseInt(), eval() 같은 전역 함수
  - Date(), RegExp(), String(), Object(), Array() 같은 생성자 함수
  - Math 와 JSON 같은 전역 객체
- 최상위 코드에서는 this 키워드를 통해 전역 객체를 참조할 수 있다.
```js
var global = this; // 전역 객체를 참조하는 변수를 정의한다.
```

## 래퍼 객체
- 자바스크립트 객체는 복합적인 값이다.
- 객체는 프로퍼티 또는 이름있는 값들의 집합이며, '.' 표기법을 사용하여 프로퍼티의 값을 참조하며, 프로퍼티 값이 함수일 때, 그 함수를 메소드라고 한다.
  - 객체 o 의 메소드 m 을 호출하려면 o.m() 과 같이 적는다.
- 문자열에도 프로퍼티와 메소드가 있다.
```js
var s = 'hello world';
var word = s.substring(s.indexOf(' ') + 1, s.length);
```
- 문자열 s 의 프로퍼티를 참조하려고 할 때, 자바스크립트는 new String(s); 를 호출한 것처럼 문자열 값을 객체로 변환한다.
  - 프로퍼티 참조가 해제되면 새로 생성된 임시 객체는 메모리에서 회수된다.
  - 숫자와 불린도 메소드를 가지며, Number() 혹은 Boolean() 생성자를 통해 만들어진다.
  - null 과 undefined 값의 래퍼 객체는 없다.
- 다음은 임시 객체에 관한 예제 코드이다.
```js
var s = 'test';
s.len = 4; // 문자열 프로퍼티에 값을 할당
var t = s.len; // 프로퍼티 참조
// t => undefined
```
- t 는 undefined 이다. 2 번째 줄에서 생성된 임시 String 객체의 len 프로퍼티에 4를 할당한 뒤, 바로 삭제되기 때문이다.
  - 하지만 다음과 같은 코드에서는 다른 결과가 나온다.
```js
var s = new String('test');
s.len = 4;
var t = s.len; // t => 4
```
- 문자열, 숫자, 불린의 프로퍼티에 접근할 때 생성되는 임시 객체는 래퍼 객체로 알려져 있다.
- 문자열과 숫자, 불린 값의 프로퍼티는 읽기 전용이고, 이 값들에 새로운 프로퍼티를 정의할 수 없다는 점에서 이 값들은 객체와 다르다는 것을 알 수 있다.
- String() 과 Number(), Boolean() 생성자를 통해 명시적으로 래퍼 객체를 생성할 수 있다.
```js
var s = 'test', n = 1, b = true;
var S = new String(s);
var N = new Number(n);
var B = new Boolean(b);

console.log(
  s == S,
  n == N,
  b == B
);
// true, true, true

console.log(
  s === S,
  n === N,
  b === B
);
// false, false, false

/***** because... *****/
typeof s // String
typeof n // Number
typeof b // Boolean
typeof S // object
typeof N // object
typeof B // object
```
- 자바스크립트는 래퍼 객체를 필요에 따라 기본 타입으로 변환하며, S, N, B 는 값 s, n, b 처럼 작동한다.

